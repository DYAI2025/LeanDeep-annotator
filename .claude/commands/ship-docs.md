---
description: Update all project docs (CLAUDE.md, ROADMAP.md, BUGS.md) with current eval metrics, mark completed items, commit + push
allowed-tools: Bash, Read, Write, Edit, Grep, Glob
---

## Context

After implementing a feature or fixing a major issue, the project documentation needs to reflect the new state. This skill runs the eval pipeline, collects current metrics, and updates all three documentation files in one pass.

**Target files:**
- `CLAUDE.md` — Current State table, What's done section, What remains section
- `docs/ROADMAP.md` — Move completed items, update metrics in Current State, update checklist
- `docs/BUGS.md` — Mark fixed bugs, update severity/status of affected bugs, add new bugs found

## Your Task

Update all project documentation with the current system state after a recent implementation.

### Steps

1. **Collect current metrics** — Run eval and gather stats:
   ```bash
   cd /Users/benjaminpoersch/Projects/LeanDeep-annotator
   python3 -m pytest tests/ -x -q 2>&1 | tail -3
   python3 tools/eval_corpus.py 2>&1 | grep -A8 "Layer Summary"
   ```
   Also check:
   - `python3 -c "import json; r=json.load(open('build/markers_normalized/marker_registry.json')); print(f'Total: {len(r[\"markers\"])}'); print({l: sum(1 for v in r['markers'].values() if v.get('layer')==l) for l in ['ATO','SEM','CLU','MEMA']})"`
   - Any broken refs: `python3 tools/fix_all_refs.py 2>&1 | grep "Broken refs"`

2. **Read current docs** — Read all three files to understand what needs updating:
   - `CLAUDE.md`
   - `docs/ROADMAP.md`
   - `docs/BUGS.md`

3. **Update CLAUDE.md:**
   - Current State table with fresh numbers (unique markers, avg confidence, detections)
   - "What's done" section with the latest implementation
   - "What remains" section reflecting current priorities
   - Date stamp

4. **Update docs/ROADMAP.md:**
   - Move completed initiative to "Completed Initiatives" section with results
   - Update "Current State" table with fresh eval numbers
   - Update Production Readiness Checklist
   - Adjust remaining initiative priorities if needed

5. **Update docs/BUGS.md:**
   - Mark fixed bugs with ~~strikethrough~~ and fix date
   - Update bug descriptions affected by recent changes
   - Add any new bugs discovered during implementation
   - Update severity levels where appropriate

6. **Commit and push:**
   ```bash
   cd /Users/benjaminpoersch/Projects/LeanDeep-annotator
   git add CLAUDE.md docs/BUGS.md docs/ROADMAP.md
   git commit -m "Update docs: [summary of what changed]

   Co-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>"
   git push
   ```

### Guardrails

- Always run eval FIRST to get real numbers — never estimate or carry over old metrics
- Keep the ROADMAP.md specs (SPEC-P0-1, etc.) intact — only update status/metrics, don't rewrite specs unless they're outdated
- Don't remove bugs from BUGS.md — mark them as fixed with date
- The commit message should summarize what docs were updated and why
- Update the date stamps in all files (`Last updated: YYYY-MM-DD`)

---
*Generated by /reflect-skills from 2 session patterns (2026-02-22)*
